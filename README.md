# 编译原理实验上机：词法分析、语法分析、三地址代码生成

## 使用方法
直接下载本项目，在python开发环境(pycharm)打开即可。
### 运行主程序
在tests文件夹中，提供了若干组测试用例，在main.py中选择对应的测试用例，输出相应的结果。

## exp1-词法分析
### 使用ply库的lex.py词法分析器。   
步骤：   
1 按实验指导书规则设计词法规则（正则表达式）   
2 设置错误提示、忽略字符   
3 构建词法分析器   
4 再循环结构中，不断从待编译的代码中取一个token，实现词法分析    
tips：具体见ply文档的demo    
    
## exp2-语法分析
### 使用ply库的yacc.py语法分析器     
大致思路与ply文档demo相同，不同的是，本实验设计了语法分析树的树节点数据结构（node.py）      
步骤：     
1 设计ast结点数据结构。包括data属性（对应的终结符或非终结符）、value属性（针对数值型的终结符，表示具体数值）     
2 按实验指导书设计语法规则      
3 设置错误提示、忽略字符     
4 构造语法分析器     
5 输入带分析语法内容，构造器按深度优先打印AST     

## exp3-三地址代码
### 根据exp2得到的AST，深度优先遍历AST，得到三地址代码
步骤：     
1 DFS遍历exp2得到的AST，在每个不同的节点进行不同的操作   
	--递归generate()函数实现，函数返回对应结点生成的三地址代码code   
2 每个节点进行的操作由指导书不同文法的语义制导规则而定    
3  generate(根节点) 得到的结果，就是生成的三地址代码   
4 将生成的最终结果删除冗余的空格、换行符，得到最终输出    
tips：   
指导书中指导规则提到的.begin、.place、.next等，作为结点的属性，但.code没有作为结点的属性体现，而是作为generate()函数的返回值，在递归该函数的过程中不断维护该代码序列，进而得到生成的三地址代码。    
